---
title: JVMæ–¹æ³•åŒºå°ç»“
author: æ¨é¹
img: >-
  https://cdn.jsdelivr.net/gh/zhazhapeng10003/cdn-speed2@1.0/pictures2/xingqiuren.jpg
top: false
cover: false
summary: " "
toc: true
mathjax: true
comments: true
tags:
  - JVM
  - æ–¹æ³•åŒº
categories: ç¼–ç¨‹åŸºç¡€
abbrlink: 6544
date: 2020-05-27 19:51:06
coverImg:
password:
---
**<font color=blue>JVMæ•´ä½“æ¶æ„å›¾æ”¾åœ¨åº•éƒ¨</font>**
### è¿è¡Œæ—¶æ•°æ®åŒºç»“æ„å›¾
<center>
<img src="https://img-blog.csdnimg.cn/20200527144701142.png" alt="" width="" height="200" align="bottom" />
</center>

----------------
### ä»çº¿ç¨‹å…±äº«ä¸å¦çš„è§’åº¦æ¥çœ‹

<center>
<img src="https://img-blog.csdnimg.cn/20200527151331445.png" alt="" width="" height="500" align="bottom" />
</center>

-----
### æ ˆã€å †ã€æ–¹æ³•åŒºçš„äº¤äº’å…³ç³»
<center>
<img src="https://img-blog.csdnimg.cn/20200527154158851.png" alt="" width="" height="500" align="bottom" />
</center>

-------------
### æ–¹æ³•åŒºå†…éƒ¨ç»“æ„

<center>
<img src="https://img-blog.csdnimg.cn/20200527161019540.png" alt="" width="" height="500" align="bottom" />
</center>

### æ–¹æ³•åŒºï¼ˆMethod Areaï¼‰å­˜å‚¨ä»€ä¹ˆï¼Ÿ
>å®ƒç”¨äºå­˜å‚¨å·²è¢«è™šæ‹ŸæœºåŠ è½½çš„<font size = 1>**ç±»å‹ä¿¡æ¯ã€å¸¸é‡ã€é™æ€å˜é‡ã€å³æ—¶ç¼–è¯‘å™¨ç¼–è¯‘åçš„ä»£ç ç¼“å­˜**</font>ç­‰ã€‚
> &ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;-----ã€Šæ·±å…¥ç†è§£Javaè™šæ‹Ÿæœºã€‹
![](https://img-blog.csdnimg.cn/20200527161829101.png)
#### ç±»å‹ä¿¡æ¯
&ensp;&ensp;&ensp;&ensp;å¯¹æ¯ä¸ªåŠ è½½çš„ç±»å‹ï¼ˆç±»classã€æ¥å£ interfaceã€æšä¸¾enumã€æ³¨è§£ annotationï¼‰ï¼ŒJVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­å­˜å‚¨ä»¥ä¸‹ç±»å‹ä¿¡æ¯ï¼š 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿™ä¸ªç±»å‹çš„å®Œæ•´æœ‰æ•ˆåç§°ï¼ˆå…¨å=åŒ…å **.** ç±»åï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿™ä¸ªç±»å‹ç›´æ¥çˆ¶ç±»çš„å®Œæ•´æœ‰æ•ˆåï¼ˆå¯¹äºinterfaceæˆ–æ˜¯java **.** lang **.** Objectï¼Œéƒ½æ²¡æœ‰çˆ¶ç±»ï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿™ä¸ªç±»å‹çš„ä¿®é¥°ç¬¦ï¼ˆpublicï¼Œabstractï¼Œfinalçš„æŸä¸ªå­é›†ï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿™ä¸ªç±»å‹ç›´æ¥æ¥å£çš„ä¸€ä¸ªæœ‰åºåˆ—è¡¨ 
#### åŸŸï¼ˆFiledï¼‰ä¿¡æ¯
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>JVMå¿…é¡»åœ¨æ–¹æ³•åŒºä¸­ä¿å­˜ç±»å‹çš„æ‰€æœ‰åŸŸçš„ç›¸å…³ä¿¡æ¯ä»¥åŠåŸŸçš„å£°æ˜é¡ºåºã€‚
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>åŸŸçš„ç›¸å…³ä¿¡æ¯åŒ…æ‹¬ï¼šåŸŸåç§°ã€åŸŸç±»å‹ã€åŸŸä¿®é¥°ç¬¦ï¼ˆ publicï¼Œ privateï¼Œprotectedï¼Œ staticï¼Œfinalï¼Œ volatileï¼Œ transientçš„æŸä¸ªå­é›†ï¼‰ 
#### æ–¹æ³•ï¼ˆMethodï¼‰ä¿¡æ¯
JVMå¿…é¡»ä¿å­˜æ‰€æœ‰æ–¹æ³•çš„ä»¥ä¸‹ä¿¡æ¯ï¼ŒåŒåŸŸä¿¡æ¯ä¸€æ ·åŒ…æ‹¬å£°æ˜é¡ºåºï¼š
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>æ–¹æ³•åç§°
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>æ–¹æ³•çš„è¿”å›ç±»å‹ï¼ˆæˆ–voidï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>æ–¹æ³•å‚æ•°çš„æ•°é‡å’Œç±»å‹ï¼ˆæŒ‰é¡ºåºï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>æ–¹æ³•çš„ä¿®é¥°ç¬¦ï¼ˆpublicï¼Œprivateï¼Œprotectedï¼Œstaticï¼Œfinalï¼Œsynchronizedï¼Œnativeï¼Œ abstractçš„ä¸€ä¸ªå­é›†ï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>æ–¹æ³•çš„å­—èŠ‚ç ï¼ˆ bytecodesï¼‰ã€æ“ä½œæ•°æ ˆã€å±€éƒ¨å˜é‡è¡¨åŠå¤§å°ï¼ˆ abstract å’Œ nativeæ–¹æ³•é™¤å¤–ï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>å¼‚å¸¸è¡¨ï¼ˆ abstractå’Œ nativeæ–¹æ³•é™¤å¤–ï¼‰
&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;**<font size = 3>ğŸ—¡** </font>æ¯ä¸ªå¼‚å¸¸å¤„ç†çš„å¼€å§‹ä½ç½®ã€ç»“æŸä½ç½®ã€ä»£ç å¤„ç†åœ¨ç¨‹åºè®¡æ•°å™¨ä¸­çš„åç§»åœ°å€ã€
è¢«æ•è·çš„å¼‚å¸¸ç±»çš„å¸¸é‡æ± ç´¢å¼• 

#### non-finalçš„ç±»å˜é‡ï¼ˆé™æ€å˜é‡ï¼‰
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>é™æ€å˜é‡å’Œç±»å…³è”åœ¨ä¸€èµ·ï¼Œéšç€ç±»çš„åŠ è½½è€ŒåŠ è½½ï¼Œå®ƒä»¬æˆä¸ºç±»æ•°æ®åœ¨é€»è¾‘ä¸Šçš„ä¸€éƒ¨åˆ†ã€‚ 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>ç±»å˜é‡è¢«ç±»çš„æ‰€æœ‰å®ä¾‹å…±äº«ï¼Œå³ä½¿æ²¡æœ‰ç±»å®ä¾‹æ—¶ä½ ä¹Ÿå¯ä»¥è®¿é—®å®ƒã€‚ 
#### è¡¥å……è¯´æ˜ï¼šå…¨å±€å¸¸é‡ï¼šstatic final
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¢«å£°æ˜ä¸ºfinalçš„ç±»å˜é‡çš„å¤„ç†æ–¹æ³•åˆ™ä¸åŒï¼Œæ¯ä¸ªå…¨å±€å¸¸é‡åœ¨ç¼–è¯‘çš„æ—¶å€™å°±ä¼šè¢«åˆ†é…äº†ã€‚
#### è¿è¡Œæ—¶å¸¸é‡æ± 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿è¡Œæ—¶å¸¸é‡æ± ï¼ˆ Runtime Constant Poolï¼‰æ˜¯æ–¹æ³•åŒºçš„ä¸€éƒ¨åˆ†ã€‚ 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>å¸¸é‡æ± è¡¨ï¼ˆ Constant Pool Tableï¼‰æ˜¯Classæ–‡ä»¶çš„ä¸€éƒ¨åˆ†ï¼Œ<font color=red>ç”¨äºå­˜æ”¾ç¼–è¯‘æœŸç”Ÿæˆçš„å„ç§å­—é¢é‡ä¸ç¬¦å·å¼•ç”¨<font color=blue>ï¼Œè¿™éƒ¨åˆ†å†…å®¹å°†åœ¨ç±»åŠ è½½åå­˜æ”¾åˆ°æ–¹æ³•åŒºçš„è¿è¡Œæ—¶å¸¸é‡æ± ä¸­ã€‚</font></font> 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œåœ¨åŠ è½½ç±»å’Œæ¥å£åˆ°è™šæ‹Ÿæœºåï¼Œå°±ä¼šåˆ›å»ºå¯¹åº”çš„è¿è¡Œæ—¶å¸¸é‡æ± ã€‚ 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>JVMä¸ºæ¯ä¸ªå·²åŠ è½½çš„ç±»å‹ï¼ˆç±»æˆ–æ¥å£ï¼‰éƒ½ç»´æŠ¤ä¸€ä¸ªå¸¸é‡æ± ã€‚æ± ä¸­çš„æ•°æ®é¡¹åƒæ•°ç»„é¡¹ä¸€æ ·ï¼Œæ˜¯é€šè¿‡ç´¢å¼•è®¿é—®çš„ã€‚ 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿è¡Œæ—¶å¸¸é‡æ± ä¸­åŒ…å«å¤šç§ä¸åŒçš„å¸¸é‡ï¼ŒåŒ…æ‹¬ç¼–è¯‘æœŸå°±å·²ç»æ˜ç¡®çš„æ•°å€¼å­—é¢é‡ï¼Œä¹ŸåŒ…æ‹¬åˆ°è¿è¡ŒæœŸè§£æåæ‰èƒ½å¤Ÿè·å¾—çš„æ–¹æ³•æˆ–è€…å­—æ®µå¼•ç”¨ã€‚æ­¤æ—¶ä¸å†æ˜¯å¸¸é‡æ± ä¸­çš„ç¬¦å·åœ°å€äº†ï¼Œè¿™é‡Œæ¢ä¸ºçœŸå®åœ°å€ã€‚ 
&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;ğŸ—¡è¿è¡Œæ—¶å¸¸é‡æ± ï¼Œç›¸å¯¹äºClassæ–‡ä»¶å¸¸é‡æ± çš„å¦ä¸€é‡è¦ç‰¹å¾æ˜¯ï¼šå…·å¤‡åŠ¨æ€æ€§ã€‚ 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>è¿è¡Œæ—¶å¸¸é‡æ± ç±»ä¼¼äºä¼ ç»Ÿç¼–ç¨‹è¯­è¨€ä¸­çš„ç¬¦å·è¡¨ï¼ˆsymbol tableï¼‰ï¼Œä½†æ˜¯å®ƒæ‰€åŒ…å«çš„æ•°æ®å´æ¯”ç¬¦å·è¡¨è¦æ›´åŠ ä¸°å¯Œä¸€äº›ã€‚ 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>å½“åˆ›å»ºç±»æˆ–æ¥å£çš„è¿è¡Œæ—¶å¸¸é‡æ± æ—¶ï¼Œå¦‚æœæ„é€ è¿è¡Œæ—¶å¸¸é‡æ± æ‰€éœ€çš„å†…å­˜ç©ºé—´è¶…è¿‡äº†æ–¹æ³•åŒºæ‰€èƒ½æä¾›çš„æœ€å¤§å€¼ï¼Œåˆ™JMä¼šæŠ›OutOfMemoryErrorå¼‚å¸¸ã€‚ 

#### <font color=red>æ–¹æ³•åŒºçš„æ¼”è¿›ç»†èŠ‚ï¼</font>
1.é¦–å…ˆæ˜ç¡®ï¼šåªæœ‰HotSpotæ‰æœ‰æ°¸ä¹…ä»£ã€‚
2.HotSpotä¸­æ–¹æ³•åŒºçš„å˜åŒ–ï¼š

jdkç‰ˆæœ¬| å…·ä½“å˜åŒ–
-------- | -----
jidk1.6åŠä¹‹å‰  | <font color=red>æœ‰æ°¸ä¹…ä»£ï¼ˆpermanent generationï¼‰ï¼Œé™æ€å˜é‡å­˜æ”¾åœ¨æ°¸ä¹…ä»£ä¸Š</font>
jdk1.7 | <font color=red>æœ‰æ°¸ä¹…ä»£ï¼Œä½†å·²ç»é€æ­¥â€œå»æ°¸ä¹…ä»£â€ï¼Œå­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ç§»é™¤ï¼Œä¿å­˜åœ¨å †ä¸­</font>
jdk1.8åŠä¹‹å  | <font color=red>æ— æ°¸ä¹…ä»£ï¼Œç±»å‹ä¿¡æ¯ã€å­—æ®µã€æ–¹æ³•ã€å¸¸é‡ä¿å­˜åœ¨æœ¬åœ°å†…å­˜çš„å…ƒç©ºé—´ï¼Œä½†å­—ç¬¦ä¸²å¸¸é‡æ± ã€é™æ€å˜é‡ä»åœ¨å †</font>

#### æ°¸ä¹…ä»£ä¸ºä»€ä¹ˆè¦è¢«å…ƒç©ºé—´æ›¿æ¢ï¼Ÿ
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>ä¸ºæ°¸ä¹…ä»£è®¾ç½®ç©ºé—´å¤§å°æ˜¯å¾ˆéš¾ç¡®å®šçš„ï¼š 
&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;åœ¨æŸäº›åœºæ™¯ä¸‹ï¼Œå¦‚æœåŠ¨æ€åŠ è½½ç±»è¿‡å¤šï¼Œå®¹æ˜“äº§ç”ŸPermåŒºçš„OOMã€‚æ¯”å¦‚æŸä¸ªå®é™…ç½‘webå·¥ç¨‹ä¸­ï¼Œå› ä¸ºåŠŸèƒ½ç‚¹æ¯”è¾ƒå¤šï¼Œåœ¨è¿è¡Œè¿‡ç¨‹ä¸­ï¼Œè¦ä¸æ–­åŠ¨æ€åŠ è½½å¾ˆå¤šç±»ï¼Œç»å¸¸å‡ºç°è‡´å‘½é”™è¯¯ã€‚<font color = red >Exception in thread dubbo client x.x connector java. lang. OutotMemory Errorï¼š PermGen space</font> 
&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;è€Œå…ƒç©ºé—´å’Œæ°¸ä¹…ä»£ä¹‹é—´æœ€å¤§çš„åŒºåˆ«åœ¨äºï¼šå…ƒç©ºé—´å¹¶ä¸åœ¨è™šæ‹Ÿæœºä¸­ï¼Œè€Œæ˜¯ä½¿ç”¨æœ¬åœ°å†…å­˜ã€‚å› æ­¤ï¼Œé»˜è®¤æƒ…å†µä¸‹ï¼Œå…ƒç©ºé—´çš„å¤§å°ä»…å—æœ¬åœ°å†…å­˜é™åˆ¶ã€‚ 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>å¯¹æ°¸ä¹…ä»£è¿›è¡Œè°ƒä¼˜æ˜¯å¾ˆå›°éš¾çš„ã€‚ 
#### æ–¹æ³•åŒºçš„åƒåœ¾å›æ”¶
**æ–¹æ³•åŒºçš„åƒåœ¾æ”¶é›†ä¸»è¦å›æ”¶ä¸¤éƒ¨åˆ†å†…å®¹ï¼šå¸¸é‡æ± ä¸­åºŸå¼ƒçš„å¸¸é‡å’Œä¸å†ä½¿ç”¨çš„ç±»å‹ã€‚** 
&ensp;&ensp;&ensp;&ensp;**<font size = 3>â€¢** </font>åˆ¤å®šä¸€ä¸ªå¸¸é‡æ˜¯å¦â€œåºŸå¼ƒâ€è¿˜æ˜¯ç›¸å¯¹ç®€å•ï¼Œè€Œè¦åˆ¤å®šä¸€ä¸ªç±»å‹æ˜¯å¦å±äºâ€œä¸å†è¢«ä½¿ç”¨çš„ç±»â€çš„æ¡ä»¶å°±æ¯”è¾ƒè‹›åˆ»äº†ã€‚éœ€è¦åŒæ—¶æ»¡è¶³ä¸‹é¢ä¸‰ä¸ªæ¡ä»¶ï¼š 
&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;ğŸ—¡è¯¥ç±»æ‰€æœ‰çš„å®ä¾‹éƒ½å·²ç»è¢«å›æ”¶ï¼Œä¹Ÿå°±æ˜¯Javaå †ä¸­ä¸å­˜åœ¨è¯¥ç±»åŠå…¶ä»»ä½•æ´¾ç”Ÿå­ç±»çš„å®ä¾‹ã€‚ 
&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;ğŸ—¡åŠ è½½è¯¥ç±»çš„ç±»åŠ è½½å™¨å·²ç»è¢«å›æ”¶ï¼Œè¿™ä¸ªæ¡ä»¶é™¤éæ˜¯ç»è¿‡ç²¾å¿ƒè®¾è®¡çš„å¯æ›¿æ¢ç±»åŠ è½½å™¨çš„åœºæ™¯ï¼Œå¦‚OSGiã€JSPçš„é‡åŠ è½½ç­‰ï¼Œå¦åˆ™é€šå¸¸æ˜¯å¾ˆéš¾è¾¾æˆçš„ã€‚ 
&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;&ensp;ğŸ—¡è¯¥ç±»å¯¹åº”çš„java.1angC1asså¯¹è±¡æ²¡æœ‰åœ¨ä»»ä½•åœ°æ–¹è¢«å¼•ç”¨ï¼Œæ— æ³•åœ¨ä»»ä½•åœ°æ–¹é€šè¿‡åå°„è®¿é—®è¯¥ç±»çš„æ–¹æ³•ã€‚ 
**<font color = red>æ³¨ï¼š</font>** æ»¡è¶³ä¸Šè¿°ä¸‰ä¸ªæ¡ä»¶ä¹‹åï¼Œä»…ä»…åªæ˜¯â€œè¢«å…è®¸â€å›æ”¶ã€‚ 
#### å­—ç¬¦ä¸²å¸¸é‡æ± ï¼ˆString Tableä¸ºä»€ä¹ˆè¦è°ƒæ•´ä½ç½®ï¼‰
&ensp;&ensp;&ensp;&ensp;jdk7ä¸­å°† StringTableæ”¾åˆ°äº†å †ç©ºé—´ä¸­ã€‚å› ä¸ºæ°¸ä¹…ä»£çš„å›æ”¶æ•ˆç‡å¾ˆä½ï¼Œåœ¨full gcçš„æ—¶å€™æ‰ä¼šè§¦å‘ã€‚è€Œfullgcæ˜¯è€å¹´ä»£çš„ç©ºé—´ä¸è¶³ã€æ°¸ä¹…ä»£ä¸è¶³æ—¶æ‰ä¼šè§¦å‘ã€‚ 
&ensp;&ensp;&ensp;&ensp;è¿™å°±å¯¼è‡´ StringTableå›æ”¶æ•ˆç‡ä¸é«˜ã€‚è€Œæˆ‘ä»¬å¼€å‘ä¸­ä¼šæœ‰å¤§é‡çš„å­—ç¬¦ä¸²è¢«åˆ›å»ºï¼Œå›æ”¶æ•ˆç‡ä½ï¼Œå¯¼è‡´æ°¸ä¹…ä»£å†…å­˜ä¸è¶³ã€‚æ”¾åˆ°å †é‡Œï¼Œèƒ½åŠæ—¶å›æ”¶å†…å­˜ã€‚


------
### JVMæ¶æ„å›¾

<center>
<img src="https://img-blog.csdnimg.cn/20200527155128840.png" alt="" width="" height="1200" align="bottom" />
</center>

**<font size =5>Peace!**